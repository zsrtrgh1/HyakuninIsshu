<!DOCTYPE html>
<html lang="ja">
  <head prefix="og: http://ogp.me/ns#">
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <meta property="og:title" content="百人一首" />
    <meta
      property="og:description"
      content="百人一首を四択でランダムに出題するサイトです。"
    />
    <meta property="og:site_name" content="百人一首" />
    <meta
      property="og:url"
      content="https://zsrtrgh1.github.io/HyakuninIsshu/"
    />
    <meta
      property="og:image"
      content="https://zsrtrgh1.github.io/HyakuninIsshu/ogpImage.jpg"
    />

    <meta name="twitter:card" content="summary_large_image" />

    <title>百人一首</title>
    <link
      href="https://use.fontawesome.com/releases/v6.2.1/css/all.css"
      rel="stylesheet"
    />

    <style>
      @import url("https://fonts.googleapis.com/css2?family=Roboto+Condensed&display=swap");
      * {
        margin: 0;
        padding: 0;
        color: #373331;
        border: #373331 2px;
        background-color: #fff3e1;
        font-family: "Times New Roman", "YuMincho", "Hiragino Mincho ProN",
          "Yu Mincho", "MS PMincho", serif;
        text-align: center;
        user-select: none;
        -webkit-user-select: none;
        transition-duration: 0.3s;
      }
      h1 {
        margin-top: 0.5em;
        font-size: 3rem;
        font-weight: bolder;
        letter-spacing: 0.1em;
      }
      a {
        text-decoration: none;
      }
      h3 {
        margin-top: 0.5em;
      }
      body {
        font-weight: bold;
      }
      main {
        position: relative;
      }
      #incorrect {
        font-family: "Times New Roman", "YuMincho", "Hiragino Mincho ProN",
          "Yu Mincho", "MS PMincho", serif;
        font-size: 1.2rem;
        margin: 0.5em 0 0.5em;
        transition-duration: 0.2s;
      }
      #kaminoku {
        color: #373331;
      }
      .button {
        padding: 0.5em;
        margin: 1em auto 0;
        max-width: 50vw;
        min-width: 20em;
        border: solid #edce45;
      }
      .button:hover {
        animation: hover 0.8s forwards;
      }
      .settings {
        padding: 0.5em;
        margin: 1em auto 0;
        max-width: 50vw;
        min-width: 20em;
        border: solid #edce45;
      }
      #settings {
        opacity: 0;
      }
      #buttons {
        font-size: 1.2rem;
      }
      #a,
      #b,
      #c,
      #d,
      #percentage,
      #count {
        display: none;
      }
      p {
        font-family: "Roboto Condensed", sans-serif;
      }
      #data {
        margin: 0 auto;
        margin-top: 1em;
        width: 100%;
        max-width: 50vw;
        display: flex;
        justify-content: space-between;
        min-width: 20em;
      }
      #auther {
        font-family: "Times New Roman", "YuMincho", "Hiragino Mincho ProN",
          "Yu Mincho", "MS PMincho", serif;
        margin: 0 auto;
        text-align: end;
        width: 50vw;
      }
      .fa-check-circle,
      .fa-times-circle {
        color: #37333122;
        transition-duration: 0.2s;
        font-size: 1.5rem;
        visibility: hidden;
      }
      span {
        display: inline-block;
      }
      form {
        font-size: 1.2rem;
        border: solid #37333122;
        margin: 1em auto 0;
        max-width: 50vw;
        min-width: 20em;
      }
      table {
        margin: 1em auto 1em;
      }
      label {
        display: block;
        padding: 0.5em;
      }
      #edit_range > input {
        font-size: 1.2rem;
      }
      input[type="submit"] {
        margin: 1em;
      }
      input[type="checkbox"] {
        accent-color: #edce45;
      }
      #updateSettings {
        min-width: 50%;
      }
      #codeLink {
        font-family: "Roboto Condensed", sans-serif;
        position: absolute;
        bottom: 0;
        left: 50%;
        transform: translateX(-50%);
      }
      #updateSettings {
        margin-bottom: 0;
      }
      details {
        margin-bottom: 1em;
      }
      i {
        font-family: "Font Awesome 5 Free";
        font-style: normal;
      }
      @keyframes hover {
        0% {
          background-color: #3733310d;
          transform: scale(1.024);
        }
        100% {
          background-color: none;
          transform: scale(1);
        }
      }
      @media screen and (max-width: 520px) {
        h2 {
          font-size: 4.8vw;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
        }
        .button:not(input[type="submit"]) {
          box-sizing: content-box;
          font-size: 4.2vw;
        }
        form {
          min-width: 16em;
        }
      }
    </style>
  </head>
  <body oncontextmenu="return false;">
    <main>
      <h1><a onclick="window.location.reload(true);">百人一首</a></h1>
      <h2 id="kaminoku">　</h2>
      <p id="auther">　</p>
      <div id="buttons">
        <div class="button" onclick="start();" id="start">はじめる</div>
        <div id="settings">
          <form action="./index.html" method="GET">
            <h3>設定</h3>
            <table>
              <tr>
                <td>出題範囲</td>
                <td>：</td>
                <td id="range">&nbsp;&nbsp;&nbsp;　&nbsp;&nbsp;</td>
              </tr>
              <tr>
                <td>文字</td>
                <td>：</td>
                <td id="charset">　　</td>
              </tr>
              <tr id="kana_dakuten">
                <td>濁点</td>
                <td>：</td>
                <td id="settings_dakuten">　　</td>
              </tr>
            </table>
            <details>
              <summary>設定の変更</summary>
              <label id="edit_range">
                <input
                  type="number"
                  name="min"
                  min="1"
                  max="100"
                  value="1"
                  id="min"
                />～
                <input
                  type="number"
                  name="max"
                  min="1"
                  max="100"
                  value="100"
                  id="max"
                />
              </label>

              <label>
                <input type="checkbox" name="kana" value="true" id="kana" />
                &nbsp;かな表示
              </label>
              <label id="edit_dakuten">
                <input
                  type="checkbox"
                  name="dakuten"
                  value="false"
                  id="dakuten"
                  checked
                />
                &nbsp;濁点なし
              </label>
              <input
                type="submit"
                value="更新"
                class="button"
                id="updateSettings"
              />
            </details>
          </form>
          <a
            href="https://github.com/zsrtrgh1/HyakuninIsshu"
            id="codeLink"
            target="_blank"
            rel="noopener noreferrer"
          >
            Github
            <i class="fa-brands fa-github"></i>
          </a>
        </div>
        <div class="button" onclick="judgment(0);" id="a">し</div>
        <div class="button" onclick="judgment(1);" id="b">も</div>
        <div class="button" onclick="judgment(2);" id="c">の</div>
        <div class="button" onclick="judgment(3);" id="d">く</div>
      </div>
      <div id="data">
        <p id="percentage">&nbsp;&nbsp;0.00%</p>
        <p id="count">No.1</p>
      </div>
      <i class="fa fa-times-circle" aria-hidden="true" id="times"></i>
      <i class="fa fa-check-circle" aria-hidden="true" id="check"></i>
      <p id="incorrect"></p>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script>
      settings = {
        minIndex: 1,
        maxIndex: 100,
        kana: false,
        dakuten: true,
      };
      function editUrl() {
        let url = new URL(window.location.href);

        let urlParams = url.searchParams;
        min = Number(urlParams.get("min"));
        max = Number(urlParams.get("max"));
        if (min !== max && Number.isInteger(min) && Number.isInteger(max)) {
          min < max ? (settings.minIndex = min) : (settings.maxIndex = min);
          min < max ? (settings.maxIndex = max) : (settings.minIndex = max);
          if (1 > settings.minIndex) {
            settings.minIndex = 1;
          }
          if (100 < settings.maxIndex) {
            settings.maxIndex = 100;
          }
          if (settings.maxIndex - settings.minIndex <= 5) {
            settings.minIndex = 1;
            settings.maxIndex = 100;
          }
        }
        console.log(settings.minIndex, settings.maxIndex);
        kana_url = urlParams.get("kana");
        settings.kana = kana_url === "true" ? true : false;
        dakuten_url = urlParams.get("dakuten");
        if (settings.kana === true) {
          if (dakuten_url === "false") {
            settings.dakuten = false;
          }
        }
      }
      Data = {
        a: [],
        b: [],
        c: [],
        d: [],
        correct: [],
        correctCount: 0,
        count: 1,
        percentage: 0.0,
        index: 0,
      };
      function getElement(id) {
        return document.getElementById(id);
      }
      let kami = getElement("kaminoku");
      let startButton = getElement("start");
      let settingsDiv = getElement("settings");
      let kanaCheck = getElement("kana");
      let input_min = getElement("min");
      let input_max = getElement("max");
      let range = getElement("range");
      let charset = getElement("charset");
      let kana_dakuten = getElement("kana_dakuten");
      let settings_dakuten = getElement("settings_dakuten");
      let edit_dakuten = getElement("edit_dakuten");
      let dakutenCheck = getElement("dakuten");
      let auther = getElement("auther");
      let a = getElement("a");
      let b = getElement("b");
      let c = getElement("c");
      let d = getElement("d");
      let percentage = getElement("percentage");
      let count = getElement("count");
      let times = getElement("times");
      let check = getElement("check");
      let incorrect = getElement("incorrect");
      let codeLink = getElement("codeLink");
      lists = {
        1: [
          "天智天皇",
          "秋の田のかりほの庵の苫をあらみ",
          "わが衣手は露にぬれつつ",
          "あきのたのかりほのいほのとまをあらみ",
          "わがころもではつゆにぬれつつ",
          "あきのたの かりほのいおの とまをあらみ",
          "わがころもでわ つゆにぬれつつ",
        ],
        2: [
          "持統天皇",
          "春過ぎて夏来にけらし白妙の",
          "衣干すてふ天の香具山",
          "はるすぎてなつきにけらししろたへの",
          "ころもほすてふあまのかぐやま",
          "はるすぎて なつきにけらし しろたえの",
          "ころもほすちょう あまの かぐやま",
        ],
        3: [
          "柿本人麻呂",
          "あしびきの山鳥の尾のしだり尾の",
          "ながながし夜をひとりかも寝む",
          "あしびきのやまどりのをのしだりをの",
          "ながながしよをひとりかもねむ",
          "あしびきの やまどりのおの しだりおの",
          "ながながしよを ひとりかもねん",
        ],
        4: [
          "山辺赤人",
          "田子の浦にうち出でてみれば白妙の",
          "富士の高嶺に雪は降りつつ",
          "たごのうらにうちいでてみればしろたへの",
          "ふじのたかねにゆきはふりつつ",
          "たごのうらに うちいでてみれば しろたえの",
          "ふじのたかねに ゆきわふりつつ",
        ],
        5: [
          "猿丸大夫",
          "奥山に紅葉踏み分け鳴く鹿の",
          "声聞く時ぞ秋は悲しき",
          "おくやまにもみぢふみわけなくしかの",
          "こゑきくときぞあきはかなしき",
          "おくやまに もみじふみわけ なくしかの",
          "こえきくときぞ あきわかなしき",
        ],
        6: [
          "中納言家持",
          "かささぎの渡せる橋に置く霜の",
          "白きを見れば夜ぞ更けにける",
          "かささぎのわたせるはしにおくしもの",
          "しろきをみればよぞふけにける",
          "かささぎの わたせる 橋に おくしもの",
          "しろきをみれば よぞふけにける",
        ],
        7: [
          "安倍仲麻呂",
          "天の原ふりさけみれば春日なる",
          "三笠の山に出でし月かも",
          "あまのはらふりさけみればかすがなる",
          "みかさのやまにいでしつきかも",
          "あまの原 ふりさけみれば かすがなる",
          "みかさのやまに いでしつきかも",
        ],
        8: [
          "喜撰法師",
          "わが庵は都の辰巳しかぞ住む",
          "世をうぢ山と人はいふなり",
          "わがいほはみやこのたつみしかぞすむ",
          "よをうぢやまとひとはいふなり",
          "わがいおわ みやこのたつみ しかぞすむ",
          "よをうじやまと ひとわいうなり",
        ],
        9: [
          "小野小町",
          "花の色は移りにけりないたづらに",
          "わが身世にふるながめせしまに",
          "はなのいろはうつりにけりないたづらに",
          "わがみよにふるながめせしまに",
          "はなのいろわ うつりにけりな いたづらに",
          "わがみよにふる ながめせしまに",
        ],
        10: [
          "蝉丸",
          "これやこの行くも帰るも別れては",
          "知るも知らぬも逢坂の関",
          "これやこのゆくもかへるもわかれては",
          "しるもしらぬもあふさかのせき",
          "これやこの ゆくもかえるも わかれてわ",
          "しるもしらぬも おうさかのせき",
        ],
        11: [
          "参議篁",
          "わたの原八十島かけて漕ぎ出でぬと",
          "人にはつげよ海人の釣船",
          "わたのはらやそしまかけてこぎいでぬと",
          "ひとにはつげよあまのつりぶね",
          "わたの原 やそしまかけて こぎいでぬと",
          "ひとにわつげよ あまのつりぶね",
        ],
        12: [
          "僧正遍昭",
          "天つ風雲の通ひ路吹きとぢよ",
          "乙女の姿しばしとどめむ",
          "あまつかぜくものかよひぢふきとぢよ",
          "をとめのすがたしばしとどめむ",
          "あまつかぜ くものかよいじ ふきとじよ",
          "おとめのすがた しばしとどめん",
        ],
        13: [
          "陽成院",
          "筑波嶺の峰より落つるみなの川",
          "恋ぞつもりて淵となりぬる",
          "つくばねのみねよりおつるみなのがは",
          "こひぞつもりてふちとなりぬる",
          "つくばねの みねよりおつる みなのがわ",
          "こいぞつもりて ふちとなりぬる",
        ],
        14: [
          "河原左大臣",
          "陸奥のしのぶもぢずりたれゆえに",
          "乱れそめにしわれならなくに",
          "みちのくのしのぶもぢずりたれゆゑに",
          "みだれそめにしわれならなくに",
          "みちのくの しのぶもじずり たれゆえに",
          "みだれそめにし われならなくに",
        ],
        15: [
          "光孝天皇",
          "君がため春の野に出でて若菜摘む",
          "わが衣手に雪は降りつつ",
          "きみがためはるののにいでてわかなつむ",
          "わがころもでにゆきはふりつつ",
          "きみがため 春ののにいでて わかなつむ",
          "わがころもでに ゆきわふりつつ",
        ],
        16: [
          "中納言行平",
          "立ち別れいなばの山の峰に生ふる",
          "まつとし聞かば今帰り来む",
          "たちわかれいなばのやまのみねにおふる",
          "まつとしきかばいまかへりこむ",
          "たちわかれ いなばのやまの みねにおうる",
          "まつとしきかば いまかえりこん",
        ],
        17: [
          "在原業平朝臣",
          "ちはやぶる神代も聞かず竜田川",
          "から紅に水くくるとは",
          "ちはやぶるかみよもきかずたつたがは",
          "からくれなゐにみづくくるとは",
          "ちはやぶる かみよもきかず たつたがわ",
          "からくれないに みずくくるとわ",
        ],
        18: [
          "藤原敏行朝臣",
          "住の江の岸に寄る波よるさへや",
          "夢の通ひ路人目よくらむ",
          "すみのえのきしによるなみよるさへや",
          "ゆめのかよひぢひとめよくらむ",
          "すみのえの きしによるなみ よるさえや",
          "ゆめのかよいじ ひとめよくらん",
        ],
        19: [
          "伊勢",
          "難波潟短き葦のふしの間も",
          "逢はでこの世を過ぐしてよとや",
          "なにはがたみじかきあしのふしのまも",
          "あはでこのよをすぐしてよとや",
          "なにわがた みじかきあしの ふしのまも",
          "あわでこのよを すぐしてよとや",
        ],
        20: [
          "元良親王",
          "わびぬれば今はた同じ難波なる",
          "身をつくしても逢はむとぞ思ふ",
          "わびぬればいまはたおなじなにはなる",
          "みをつくしてもあはむとぞおもふ",
          "わびぬれば いま はた同じ なにわなる",
          "みをつくしても あわんとぞおもう",
        ],
        21: [
          "素性法師",
          "今来むといひしばかりに長月の",
          "有明の月を待ち出でつるかな",
          "いまこむといひしばかりにながつきの",
          "ありあけのつきをまちいでつるかな",
          "いまこんと いいしばかりに ながつきの",
          "ありあけのつきを まちいでつるかな",
        ],
        22: [
          "文屋康秀",
          "吹くからに秋の草木のしをるれば",
          "むべ山風を嵐といふらむ",
          "ふくからにあきのくさきのしをるれば",
          "むべやまかぜをあらしといふらむ",
          "ふくからに あきのくさきの しをるれば",
          "むべやまかぜを あらしというらん",
        ],
        23: [
          "大江千里",
          "月見れば千々にものこそ悲しけれ",
          "わが身ひとつの秋にはあらねど",
          "つきみればちぢにものこそかなしけれ",
          "わがみひとつのあきにはあらねど",
          "つきみれば ちじにものこそ かなしけれ",
          "わがみひとつの あきにわあらねど",
        ],
        24: [
          "菅家",
          "このたびは幣もとりあへず手向山",
          "紅葉の錦神のまにまに",
          "このたびはぬさもとりあへずたむけやま",
          "もみぢのにしきかみのまにまに",
          "このたびわ ぬさもとりあえず たむけやま",
          "もみじのにしき かみのまにまに",
        ],
        25: [
          "三条右大臣",
          "名にし負はば逢坂山のさねかずら",
          "人に知られでくるよしもがな",
          "なにしおはばあふさかやまのさねかづら",
          "ひとにしられでくるよしもがな",
          "なにしおわば おうさかやまの さねかずら",
          "ひとにしられで くるよしもがな",
        ],
        26: [
          "貞信公",
          "小倉山峰のもみぢ葉心あらば",
          "今ひとたびのみゆき待たなむ",
          "をぐらやまみねのもみぢばこころあらば",
          "いまひとたびのみゆきまたなむ",
          "おぐらやま みねのもみじば こころあらば",
          "いまひとたびの みゆきまたなん",
        ],
        27: [
          "中納言兼輔",
          "みかの原わきて流るる泉川",
          "いつ見きとてか恋しかるらむ",
          "みかのはらわきてながるるいづみがは",
          "いつみきとてかこひしかるらむ",
          "みかの原 わきてながるる いずみがわ",
          "いつみきとてか こいしかるらん",
        ],
        28: [
          "源宗于朝臣",
          "山里は冬ぞ寂しさまさりける",
          "人目も草もかれぬと思へば",
          "やまざとはふゆぞさびしさまさりける",
          "ひとめもくさもかれぬとおもへば",
          "やまざとわ ふゆぞさびしさまさりける",
          "ひとめもくさも かれぬとおもえば",
        ],
        29: [
          "凡河内躬恒",
          "心あてに折らばや折らむ初霜の",
          "置きまどはせる白菊の花",
          "こころあてにをらばやをらむはつしもの",
          "おきまどはせるしらぎくのはな",
          "こころあてに おらばやおらん 初霜の",
          "おきまどわせる しらぎくの花",
        ],
        30: [
          "壬生忠岑",
          "有明のつれなく見えし別れより",
          "暁ばかり憂きものはなし",
          "ありあけのつれなくみえしわかれより",
          "あかつきばかりうきものはなし",
          "ありあけの つれなくみえし わかれより",
          "あかつきばかり うきものわなし",
        ],
        31: [
          "坂上是則",
          "朝ぼらけ有明の月と見るまでに",
          "吉野の里に降れる白雪",
          "あさぼらけありあけのつきとみるまでに",
          "よしののさとに ふれるしらゆき",
          "あさぼらけ ありあけのつきと みるまでに",
          "よしののさとに ふれるしらゆき",
        ],
        32: [
          "春道列樹",
          "山川に風のかけたるしがらみは",
          "流れもあへぬ紅葉なりけり",
          "やまがはにかぜのかけたるしがらみは",
          "ながれもあへぬもみぢなりけり",
          "やまがわに かぜのかけたる しがらみわ",
          "ながれもあえぬ もみじなりけり",
        ],
        33: [
          "紀友則",
          "ひさかたの光のどけき春の日に",
          "しづ心なく花の散るらむ",
          "ひさかたのひかりのどけきはるのひに",
          "しづこころなくはなのちるらむ",
          "ひさかたの ひかりのどけき 春のひに",
          "しずごごろなく 花のちるらん",
        ],
        34: [
          "藤原興風",
          "誰をかも知る人にせむ高砂の",
          "松も昔の友ならなくに",
          "たれをかもしるひとにせむたかさごの",
          "まつもむかしのともならなくに",
          "たれをかも しるひとにせん たかさごの",
          "まつもむかしの ともならなくに",
        ],
        35: [
          "紀貫之",
          "人はいさ心も知らずふるさとは",
          "花ぞ昔の香に匂ひける",
          "ひとはいさこころもしらずふるさとは",
          "はなぞむかしのかににほひける",
          "ひとわいさ こころもしらず ふるさとわ",
          "花ぞむかしの かににおいける",
        ],
        36: [
          "清原深養父",
          "夏の夜はまだ宵ながら明けぬるを",
          "雲のいずこに月宿るらむ",
          "なつのよはまだよひながらあけぬるを",
          "くものいづこにつきやどるらむ",
          "なつのよわ まだよいながら あけぬるを",
          "くものいずこに つきやどるらん",
        ],
        37: [
          "文屋朝康",
          "白露に風の吹きしく秋の野は",
          "つらぬきとめぬ玉ぞ散りける",
          "しらつゆにかぜのふきしくあきののは",
          "つらぬきとめぬたまぞちりける",
          "しらつゆに かぜのふきしく あきののわ",
          "つらぬきとめぬ たまぞちりける",
        ],
        38: [
          "右近",
          "忘らるる身をば思はず誓ひてし",
          "人の命の惜しくもあるかな",
          "わすらるるみをばおもはずちかひてし",
          "ひとのいのちのをしくもあるかな",
          "わすらるる みをばおもわず ちかいてし",
          "ひとのいのちの おしくもあるかな",
        ],
        39: [
          "参議等",
          "浅茅生の小野の篠原忍ぶれど",
          "あまりてなどか人の恋しき",
          "あさぢふのをののしのはらしのぶれど",
          "あまりてなどかひとのこひしき",
          "あさじうの おののしの原 しのぶれど",
          "あまりてなどか ひとのこいしき",
        ],
        40: [
          "平兼盛",
          "忍ぶれど色に出でにけりわが恋は",
          "ものや思ふと人の問ふまで",
          "しのぶれどいろにいでにけりわがこひは",
          "ものやおもふとひとのとふまで",
          "しのぶれど いろにいでにけり わがこいわ",
          "ものやおもうと ひとのとうまで",
        ],
        41: [
          "壬生忠見",
          "恋すてふわが名はまだき立ちにけり",
          "人知れずこそ思ひそめしか",
          "こひすてふわがなはまだきたちにけり",
          "ひとしれずこそおもひそめしか",
          "こいすちょう わがなわまだき たちにけり",
          "ひとしれずこそ おもいそめしか",
        ],
        42: [
          "清原元輔",
          "契りきなかたみに袖をしぼりつつ",
          "末の松山波越さじとは",
          "ちぎりきなかたみにそでをしぼりつつ",
          "すゑのまつやまなみこさじとは",
          "ちぎりきな かたみにそでを しぼりつつ",
          "すえのまつやま なみこさじとわ",
        ],
        43: [
          "権中納言敦忠",
          "逢ひ見ての後の心にくらぶれば",
          "昔はものを思はざりけり",
          "あひみてののちのこころにくらぶれば",
          "むかしはものをおもはざりけり",
          "あいみての のちのこころに くらぶれば",
          "むかしわものを おもわざりけり",
        ],
        44: [
          "中納言朝忠",
          "逢ふことの絶えてしなくはなかなかに",
          "人をも身をも恨みざらまし",
          "あふことのたえてしなくはなかなかに",
          "ひとをもみをもうらみざらまし",
          "あうことの たえてしなくわ なかなかに",
          "ひとをも みをも うらみざらまし",
        ],
        45: [
          "謙徳公",
          "あはれともいふべき人は思ほえで",
          "身のいたずらになりぬべきかな",
          "あはれともいふべきひとはおもほえで",
          "みのいたづらになりぬべきかな",
          "あわれとも いうべきひとわ おもおえで",
          "みのいたずらに なりぬべきかな",
        ],
        46: [
          "曾禰好忠",
          "由良の戸を渡る舟人かぢをたえ",
          "ゆくへも知らぬ恋の道かな",
          "ゆらのとをわたるふなびとかぢをたえ",
          "ゆくへもしらぬこひのみちかな",
          "ゆらのとを わたるふなびと かじをたえ",
          "ゆくえもしらぬ こいのみちかな",
        ],
        47: [
          "恵慶法師",
          "八重むぐら茂れる宿のさびしきに",
          "人こそ見えね秋は来にけり",
          "やへむぐらしげれるやどのさびしきに",
          "ひとこそみえねあきはきにけり",
          "やえむぐら しげれるやどの さびしきに",
          "ひとこそみえね あきわきにけり",
        ],
        48: [
          "源重之",
          "風をいたみ岩うつ波のおのれのみ",
          "くだけてものを思ふころかな",
          "かぜをいたみいはうつなみのおのれのみ",
          "くだけてものをおもふころかな",
          "かぜをいたみ いわうつなみの おのれのみ",
          "くだけてものを おもうころかな",
        ],
        49: [
          "大中臣能宣",
          "御垣守衛士のたく火の夜は燃え",
          "昼は消えつつものをこそ思へ",
          "みかきもりゑじのたくひのよるはもえ",
          "ひるはきえつつものをこそおもへ",
          "みかきもり えじのたくひの よるわもえ",
          "ひるわきえつつ ものをこそおもえ",
        ],
        50: [
          "藤原義孝",
          "君がため惜しからざりし命さへ",
          "長くもがなと思ひけるかな",
          "きみがためをしからざりしいのちさへ",
          "ながくもがなとおもひけるかな",
          "きみがため おしからざりし いのちさえ",
          "ながくもがなと おもいけるかな",
        ],
        51: [
          "藤原実方朝臣",
          "かくとだにえやはいぶきのさしも草",
          "さしも知らじな燃ゆる思ひを",
          "かくとだにえやはいぶきのさしもぐさ",
          "さしもしらじなもゆるおもひを",
          "かくとだに えやわいぶきの さしもぐさ",
          "さしもしらじな もゆるおもいを",
        ],
        52: [
          "藤原道信朝臣",
          "明けぬれば暮るるものとは知りながら",
          "なほ恨めしき朝ぼらけかな",
          "あけぬればくるるものとはしりながら",
          "なほうらめしきあさぼらけかな",
          "あけぬれば くるるものとわ しりながら",
          "なおうらめしき あさぼらけかな",
        ],
        53: [
          "右大将道綱母",
          "嘆きつつひとり寝る夜の明くる間は",
          "いかに久しきものとかは知る",
          "なげきつつひとりぬるよのあくるまは",
          "いかにひさしきものとかはしる",
          "なげきつつ ひとりぬるよの あくるまわ",
          "いかにひさしき ものとかわしる",
        ],
        54: [
          "儀同三司母",
          "忘れじの行く末まではかたければ",
          "今日をかぎりの命ともがな",
          "わすれじのゆくすゑまではかたければ",
          "けふをかぎりのいのちともがな",
          "わすれじの ゆくすえまでわ かたければ",
          "きょうをかぎりの いのちともがな",
        ],
        55: [
          "大納言公任",
          "滝の音は絶えて久しくなりぬれど",
          "名こそ流れてなほ聞こえけれ",
          "たきのおとはたえてひさしくなりぬれど",
          "なこそながれてなほきこえけれ",
          "たきのおとわ たえてひさしく なりぬれど",
          "なこそながれて なおきこえけれ",
        ],
        56: [
          "和泉式部",
          "あらざらむこの世のほかの思ひ出に",
          "今ひとたびの逢ふこともがな",
          "あらざらむこのよのほかのおもひでに",
          "いまひとたびのあふこともがな",
          "あらざらん このよのほかの おもいでに",
          "いまひとたびの あうこともがな",
        ],
        57: [
          "紫式部",
          "めぐり逢ひて見しやそれとも分かぬ間に",
          "雲隠れにし夜半の月かな",
          "めぐりあひてみしやそれともわかぬまに",
          "くもがくれにしよはのつきかな",
          "めぐりあいて みしやそれとも わかぬまに",
          "くもがくれにし よわのつきかな",
        ],
        58: [
          "大弐三位",
          "有馬山猪名の笹原風吹けば",
          "いでそよ人を忘れやはする",
          "ありまやまゐなのささはらかぜふけば",
          "いでそよひとをわすれやはする",
          "ありまやま いなのささやま かぜふけば",
          "いでそよひとを わすれやわする",
        ],
        59: [
          "赤染衛門",
          "やすらはで寝なましものを小夜更けて",
          "かたぶくまでの月を見しかな",
          "やすらはでねなましものをさよふけて",
          "かたぶくまでのつきをみしかな",
          "やすらわで ねなましものを さよふけて",
          "かたぶくまでの つきをみしかな",
        ],
        60: [
          "小式部内侍",
          "大江山いく野の道の遠ければ",
          "まだふみも見ず天の橋立",
          "おほえやまいくののみちのとほければ",
          "まだふみもみずあまのはしだて",
          "おおえやま いくののみちの とおければ",
          "まだふみもみず あまの橋だて",
        ],
        61: [
          "伊勢大輔",
          "いにしへの奈良の都の八重桜",
          "けふ九重に匂ひぬるかな",
          "いにしへのならのみやこのやへざくら",
          "けふここのへににほひぬるかな",
          "いにしえの ならのみやこの やえざくら",
          "きょうここのえに においぬるかな",
        ],
        62: [
          "清少納言",
          "夜をこめて鳥のそら音ははかるとも",
          "よに逢坂の関はゆるさじ",
          "よをこめてとりのそらねははかるとも",
          "よにあふさかのせきはゆるさじ",
          "よをこめて とりのそらねわ はかるとも",
          "よにおうさかの せきわゆるさじ",
        ],
        63: [
          "左京大夫道雅",
          "今はただ思ひ絶えなむとばかりを",
          "人づてならでいふよしもがな",
          "いまはただおもひたえなむとばかりを",
          "ひとづてならでいふよしもがな",
          "いまわただ おもいたえなんとばかりを",
          "ひとづてならで いうよしもがな",
        ],
        64: [
          "権中納言定頼",
          "朝ぼらけ宇治の川霧たえだえに",
          "あらはれわたる瀬々の網代木",
          "あさぼらけうぢのかはぎりたえだえに",
          "あらはれわたるせぜのあじろぎ",
          "あさぼらけ うじのかわぎり たえだえに",
          "あらわれわたる せぜのあじろぎ",
        ],
        65: [
          "相模",
          "恨みわび干さぬ袖だにあるものを",
          "恋に朽ちなむ名こそ惜しけれ",
          "うらみわびほさぬそでだにあるものを",
          "こひにくちなむなこそをしけれ",
          "うらみわび ほさぬそでだに あるものを",
          "こいにくちなん なこそおしけれ",
        ],
        66: [
          "前大僧正行尊",
          "もろともにあはれと思え山桜",
          "花よりほかに知る人もなし",
          "もろともにあはれとおもへやまざくら",
          "はなよりほかにしるひともなし",
          "もろともに あわれとおもえ やまざくら",
          "花よりほかに しるひともなし",
        ],
        67: [
          "周防内侍",
          "春の夜の夢ばかりなる手枕に",
          "かひなく立たむ名こそ惜しけれ",
          "はるのよのゆめばかりなるたまくらに",
          "かひなくたたむなこそをしけれ",
          "春のよの ゆめばかりなる たまくらに",
          "かいなくたたん なこそおしけれ",
        ],
        68: [
          "三条院",
          "心にもあらで憂き夜にながらへば",
          "恋しかるべき夜半の月かな",
          "こころにもあらでうきよにながらへば",
          "こひしかるべきよはのつきかな",
          "こころにも あらでうきよに ながらえば",
          "こいしかるべき よわのつきかな",
        ],
        69: [
          "能因法師",
          "嵐ふく三室の山のもみぢ葉は",
          "竜田の川の錦なりけり",
          "あらしふくみむろのやまのもみぢばは",
          "たつたのかはのにしきなりけり",
          "あらしふく みむろのやまの もみじばわ",
          "たつたのかわの にしきなりけり",
        ],
        70: [
          "良暹法師",
          "寂しさに宿を立ち出でてながむれば",
          "いづこも同じ秋の夕暮れ",
          "さびしさにやどをたちいでてながむれば",
          "いづこもおなじあきのゆふぐれ",
          "さびしさに やどをたちいでて ながむれば",
          "いづこもおなじ あきのゆうぐれ",
        ],
        71: [
          "大納言経信",
          "夕されば門田の稲葉おとづれて",
          "葦のまろやに秋風ぞ吹く",
          "ゆふさればかどたのいなばおとづれて",
          "あしのまろやにあきかぜぞふく",
          "ゆうされば かどたのいなば おとずれて",
          "あしのまろやに あきかぜぞふく",
        ],
        72: [
          "祐子内親王家紀伊",
          "音に聞く高師の浜のあだ波は",
          "かけじや袖のぬれもこそすれ",
          "おとにきくたかしのはまのあだなみは",
          "かけじやそでのぬれもこそすれ",
          "おとにきく たかしの浜の あだなみわ",
          "かけじやそでの ぬれもこそすれ",
        ],
        73: [
          "権中納言匡房",
          "高砂の尾の上の桜咲きにけり",
          "外山の霞立たずもあらなむ",
          "たかさごのをのへのさくらさきにけり",
          "とやまのかすみたたずもあらなむ",
          "たかさごの おのえのさくら さきにけり",
          "とやまのかすみ たたずもあらなん",
        ],
        74: [
          "源俊頼朝臣",
          "憂かりける人を初瀬の山おろしよ",
          "はげしかれとは祈らぬものを",
          "うかりけるひとをはつせのやまおろしよ",
          "はげしかれとはいのらぬものを",
          "うかりける ひとをはつせの やまおろしよ",
          "はげしかれとわ いのらぬものを",
        ],
        75: [
          "藤原基俊",
          "契りおきしさせもが露を命にて",
          "あはれ今年の秋もいぬめり",
          "ちぎりおきしさせもがつゆをいのちにて",
          "あはれことしのあきもいぬめり",
          "ちぎりおき させもがつゆを いのちにて",
          "あわれことしの あきもいぬめり",
        ],
        76: [
          "法性寺入道前関白太政大臣",
          "わたの原漕ぎ出でて見ればひさかたの",
          "雲居にまがふ沖つ白波",
          "わたのはらこぎいでてみればひさかたの",
          "くもゐにまがふおきつしらなみ",
          "わたの原 こぎいでてみれば ひさかたの",
          "くもいにまがう おきつしらなみ",
        ],
        77: [
          "崇徳院",
          "瀬をはやみ岩にせかるる滝川の",
          "われても末に逢はむとぞ思ふ",
          "せをはやみいはにせかるるたきがはの",
          "われてもすゑにあはむとぞおもふ",
          "せおはやみ いわにせかるる たきがわの",
          "われてもすえに あわんとぞおもう",
        ],
        78: [
          "源兼昌",
          "淡路島通ふ千鳥の鳴く声に",
          "いく夜寝覚めぬ須磨の関守",
          "あはぢしまかよふちどりのなくこゑに",
          "いくよねざめぬすまのせきもり",
          "あわじしま かようちどりの なくこえに",
          "いくよ ねざめぬ すまのせきもり",
        ],
        79: [
          "左京大夫顕輔",
          "秋風にたなびく雲のたえ間より",
          "もれ出づる月の影のさやけさ",
          "あきかぜにたなびくくものたえまより",
          "もれいづるつきのかげのさやけさ",
          "あきかぜに たなびくくもの たえまより",
          "もれいずるつきの かげのさやけさ",
        ],
        80: [
          "待賢門院堀河",
          "ながからむ心も知らず黒髪の",
          "乱れてけさはものをこそ思へ",
          "ながからむこころもしらずくろかみの",
          "みだれてけさはものをこそおもへ",
          "ながからん こころもしらず くろかみの",
          "みだれてけさわ ものをこそおもえ",
        ],
        81: [
          "後徳大寺左大臣",
          "ほととぎす鳴きつる方をながむれば",
          "ただ有明の月ぞ残れる",
          "ほととぎすなきつるかたをながむれば",
          "ただありあけのつきぞのこれる",
          "ほととぎす なきつるかたを ながむれば",
          "ただありあけの つきぞのこれる",
        ],
        82: [
          "道因法師",
          "思ひわびさても命はあるものを",
          "憂きに堪へぬは涙なりけり",
          "おもひわびさてもいのちはあるものを",
          "うきにたへぬはなみだなりけり",
          "おもいわび さてもいのちわ あるものを",
          "うきにたえぬわ なみだなりけり",
        ],
        83: [
          "皇太后宮大夫俊成",
          "世の中よ道こそなけれ思ひ入る",
          "山の奥にも鹿ぞ鳴くなる",
          "よのなかよみちこそなけれおもひいる",
          "やまのおくにもしかぞなくなる",
          "よのなかよ みちこそなけれ おもいいる",
          "やまのおくにも しかぞなくなる",
        ],
        84: [
          "藤原清輔朝臣",
          "ながらへばまたこのごろやしのばれむ",
          "憂しと見し世ぞ今は恋しき",
          "ながらへばまたこのごろやしのばれむ",
          "うしとみしよぞいまはこひしき",
          "ながらえば またこのごろや しのばれん",
          "うしとみしよぞ いまわこいしき",
        ],
        85: [
          "俊恵法師",
          "夜もすがらもの思ふころは明けやらで",
          "ねやのひまさへつれなかりけり",
          "よもすがらものおもふころはあけやらで",
          "ねやのひまさへつれなかりけり",
          "よもすがら ものおもうころわ あけやらで",
          "ねやのひまさえ つれなかりけり",
        ],
        86: [
          "西行法師",
          "嘆けとて月やはものを思はする",
          "かこち顔なるわが涙かな",
          "なげけとてつきやはものをおもはする",
          "かこちがほなるわがなみだかな",
          "なげけとて つきやわものを おもわする",
          "かこちがおなる わがなみだかな",
        ],
        87: [
          "寂蓮法師",
          "村雨の露もまだ干ぬまきの葉に",
          "霧立ちのぼる秋の夕暮",
          "むらさめのつゆもまだひぬまきのはに",
          "きりたちのぼるあきのゆふぐれ",
          "むらさめの つゆもまだひぬ まきの葉に",
          "きりたちのぼる あきのゆうぐれ",
        ],
        88: [
          "皇嘉門院別当",
          "難波江の葦のかりねのひとよゆゑ",
          "身をつくしてや恋ひわたるべき",
          "なにはえのあしのかりねのひとよゆゑ",
          "みをつくしてやこひわたるべき",
          "なにわえの あしのかりねの ひとよゆえ",
          "みをつくしてや こいわたるべき",
        ],
        89: [
          "式子内親王",
          "玉の緒よ絶えなば絶えねながらへば",
          "忍ぶることの弱りもぞする",
          "たまのをよたえなばたえねながらへば",
          "しのぶることのよわりもぞする",
          "たまのおよ たえなばたえね ながらえば",
          "しのぶることの よわりもぞする",
        ],
        90: [
          "殷富門院大輔",
          "見せばやな雄島の海人の袖だにも",
          "濡れにぞ濡れし色は変はらず",
          "みせばやなをじまのあまのそでだにも",
          "ぬれにぞぬれしいろはかはらず",
          "みせばやな おじまのあまの そでだにも",
          "ぬれにぞぬれし いろわかわらず",
        ],
        91: [
          "後京極摂政前太政大臣",
          "きりぎりす鳴くや霜夜のさむしろに",
          "衣かたしきひとりかも寝む",
          "きりぎりすなくやしもよのさむしろに",
          "ころもかたしきひとりかもねむ",
          "きりぎりす なくやしもよの さむしろに",
          "ころもかたしき ひとりかもねん",
        ],
        92: [
          "二条院讃岐",
          "わが袖は潮干に見えぬ沖の石の",
          "人こそ知らねかわく間もなし",
          "わがそではしほひにみえぬおきのいしの",
          "ひとこそしらねかわくまもなし",
          "わがそでわ しおひにみえぬ おきのいしの",
          "ひとこそしらね かわくまもなし",
        ],
        93: [
          "鎌倉右大臣",
          "世の中は常にもがもな渚漕ぐ",
          "海人の小舟の綱手かなしも",
          "よのなかはつねにもがもななぎさこぐ",
          "あまのをぶねのつなでかなしも",
          "よのなかわ つねにもがもな なぎさこぐ",
          "あまのおぶねの つなでかなしも",
        ],
        94: [
          "参議雅経",
          "み吉野の山の秋風小夜更けて",
          "ふるさと寒く衣うつなり",
          "みよしののやまのあきかぜさよふけて",
          "ふるさとさむくころもうつなり",
          "みよしのの やまのあきかぜ さよふけて",
          "ふるさとさむく ころもうつなり",
        ],
        95: [
          "前大僧正慈円",
          "おほけなく憂き世の民におほふかな",
          "わが立つ杣にすみ染の袖",
          "おほけなくうきよのたみにおほふかな",
          "わがたつそまにすみぞめのそで",
          "おおけなく うきよのたみに おおうかな",
          "わがたつそまに すみぞめのそで",
        ],
        96: [
          "入道前太政大臣",
          "花さそふ嵐の庭の雪ならで",
          "ふりゆくものはわが身なりけり",
          "はなさそふあらしのにはのゆきならで",
          "ふりゆくものはわがみなりけり",
          "花さそう あらしのにわの ゆきならで",
          "ふりゆくものわ わがみなりけり",
        ],
        97: [
          "権中納言定家",
          "来ぬ人を松帆の浦の夕なぎに",
          "焼くや藻塩の身もこがれつつ",
          "こぬひとをまつほのうらのゆふなぎに",
          "やくやもしほのみもこがれつつ",
          "こぬひとを まつほのうらの ゆうなぎに",
          "やくやもしおの みもこがれつつ",
        ],
        98: [
          "従二位家隆",
          "風そよぐ楢の小川の夕暮は",
          "みそぎぞ夏のしるしなりける",
          "かぜそよぐならのをがはのゆふぐれは",
          "みそぎぞなつのしるしなりける",
          "かぜそよぐ ならのおがわの ゆうぐれわ",
          "みそぎぞなつの しるしなりける",
        ],
        99: [
          "後鳥羽院",
          "人もをし人もうらめしあじきなく",
          "世を思ふゆゑにもの思ふ身は",
          "ひともをしひともうらめしあぢきなく",
          "よをおもふゆゑにものおもふみは",
          "ひともおし ひともうらめし あじきなく",
          "よをおもうゆえに ものおもうみわ",
        ],
        100: [
          "順徳院",
          "百敷や古き軒端のしのぶにも",
          "なほあまりある昔なりけり",
          "ももしきやふるきのきばのしのぶにも",
          "なほあまりあるむかしなりけり",
          "ももしきや ふるきのきばの しのぶにも",
          "なおあまりある むかしなりけり",
        ],
      };

      function sleepByPromise(sec) {
        return new Promise((resolve) => setTimeout(resolve, sec * 1000));
      }
      async function wait(sec, execute) {
        await sleepByPromise(sec);
        execute();
      }

      const speak = function (params) {
        text = new SpeechSynthesisUtterance(params);
        SpeechSynthesisUtterance.lang = "ja-JP";
        window.speechSynthesis.speak(text);
      };

      function removeDakuten(text) {
        output = "";
        text.split("").forEach((element) => {
          output += element.normalize("NFD")[0];
        });
        return output;
      }

      random = function (min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      };
      randomArray = function () {
        var array = [];
        for (i = 1; i <= 4; i++) {
          while (true) {
            var tmp = random(settings.minIndex, settings.maxIndex);
            if (!array.includes(tmp)) {
              array.push(tmp);
              break;
            }
          }
        }
        return array;
      };

      const shuffle = ([...array]) => {
        for (let i = array.length - 1; i >= 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      };
      chooseIndex = function (numbers) {
        correct = numbers[0];
        numbers = shuffle(numbers);
        return {
          array: numbers,
          correct: correct,
        };
      };
      function generateQuiz() {
        numbers = chooseIndex(randomArray());
        correctIndex = numbers["correct"];
        array = numbers["array"];

        Data.a = lists[array[0]];
        Data.b = lists[array[1]];
        Data.c = lists[array[2]];
        Data.d = lists[array[3]];
        Data.correct = lists[correctIndex];
        Data.numbers = numbers;
        [Data.a, Data.b, Data.c, Data.d, Data.correct, Data.numbers].forEach(
          (element) => {
            if (element === undefined) {
              Data.a = lists[array[0]];
              Data.b = lists[array[1]];
              Data.c = lists[array[2]];
              Data.d = lists[array[3]];
              Data.correct = lists[correctIndex];
              Data.numbers = numbers;
            }
          }
        );

        console.log(Data.a, Data.b, Data.c, Data.d, numbers);
        console.log(correctIndex);
        console.log(array);
      }
      function update(params) {
        var index;
        settings.kana ? (index = 3) : (index = 1);
        kami.innerHTML = Data.correct[index];
        speak(Data.correct[5]);
        speak(Data.correct[6]);
        auther.innerHTML = Data.correct[0];
        a.innerHTML = Data.a[index + 1];
        b.innerHTML = Data.b[index + 1];
        c.innerHTML = Data.c[index + 1];
        d.innerHTML = Data.d[index + 1];
        if (settings.dakuten === false && settings.kana === true) {
          kami.innerHTML = kami.innerHTML;
          a.innerHTML = removeDakuten(a.innerHTML);
          b.innerHTML = removeDakuten(b.innerHTML);
          c.innerHTML = removeDakuten(c.innerHTML);
          d.innerHTML = removeDakuten(d.innerHTML);
        }
      }
      start = function () {
        startButton.remove();
        settingsDiv.remove();
        codeLink.remove();
        a.style.display =
          b.style.display =
          c.style.display =
          d.style.display =
          percentage.style.display =
          count.style.display =
            "block";
        times.style.visibility = check.style.visibility = "visible";
        update();
      };

      updateIconColor = function (boolean) {
        if (boolean) {
          check.style.color = "#5CED92";
          Data.correctCount++;
          incorrect.innerHTML = "";
        } else {
          times.style.color = "#ED4139";
          incorrectHTML = `<span>${Data.correct[1]}</span> <span>${Data.correct[2]}</span>`;
          incorrect.innerHTML = incorrectHTML;
        }
      };

      updateData = function () {
        Data.percentage = (Data.correctCount / Data.count) * 100;
        Data.count++;
        count.innerHTML = `No.${Data.count}`;
        formatPercentage = `${Data.percentage.toFixed(2)}`;
        formatPercentage = formatPercentage.padStart(6, "     ");
        percentage.innerHTML = `${formatPercentage}%`;
      };

      function judgment(params) {
        updateIconColor(Data.numbers.correct === Data.numbers.array[params]);
        wait(0.4, () => {
          check.style.color = times.style.color = "#37333122";
        });

        window.speechSynthesis.cancel();

        generateQuiz();
        update();
        updateData();
      }

      kana.addEventListener("change", () => {
        kana.checked === false
          ? (dakutenCheck.checked = false)
          : (dakutenCheck.checked = true);
      });

      window.onload = function onLoad() {
        editUrl();
        range.innerHTML = `${settings.minIndex}～${settings.maxIndex}`;
        charset.innerHTML = settings.kana === false ? "漢字" : "平仮名";
        kanaCheck.checked = settings.kana;
        if (settings.kana === false) {
          dakutenCheck.checked = false;
          kana_dakuten.remove();
        } else {
          settings_dakuten.innerHTML =
            settings.dakuten === false ? "無し" : "有り";
          if (settings.dakuten === false) {
            dakutenCheck.checked = true;
          } else if (settings.dakuten === true) {
            dakutenCheck.checked = false;
          }
        }
        settingsDiv.style.opacity = 1;

        input_min.value = `${settings.minIndex}`;
        input_max.value = `${settings.maxIndex}`;
        generateQuiz();
      };
    </script>
  </body>
</html>
